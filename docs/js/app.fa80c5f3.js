(function(e){function t(t){for(var r,o,s=t[0],c=t[1],d=t[2],f=0,u=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(u.length)u.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/image-diff/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00fe":function(e,t,n){"use strict";var r=n("5315"),a=n.n(r);a.a},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"05c0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAsElEQVR4Ad3SgQYCQRSF4X2AVFslhBJ6hQKEHjsIApSypSJE6BUCXwxop4ldgH7Amf+YO+Nm/4SplU6UjdwBvgtrHOKKoVtUiI4OWqV0EBWiwzO2WpF+9SRLoafAVuPjzpuBiUeWRm7nZRH0u6CHfJL9QtO8rFcg6Jzr6r3auplmHX3pZa8d8nGFYTTscdSV/lajeHYdJ1w8SekPFOWn6rtCqrBBIa++fFNreYX1/gPelx7rH7BUXzcAAAAASUVORK5CYII="},1:function(e,t){},1452:function(e,t,n){"use strict";var r=n("dd6a"),a=n.n(r);a.a},"1ea6":function(e,t,n){"use strict";var r=n("35d5"),a=n.n(r);a.a},2:function(e,t){},"35d5":function(e,t,n){},"39f1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAQAAAADIDABVAAAAAnRSTlMAAHaTzTgAAAAZSURBVHgBY8AKDiMw++EHYIwGEOIItdgAABf6CzsSOY3AAAAAAElFTkSuQmCC"},5315:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o={name:"app",mounted:function(){}},s=o,c=(n("034f"),n("2877")),d=Object(c["a"])(s,a,i,!1,null,null,null),l=d.exports,f=n("8c4f"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body"},[r("title-bar",{attrs:{setting:e.setting,"frame-pan-coord":e.framePanCoord,"frame-zoom":e.frameZoom,frameRowCount:void 0!=e.frame2D?e.frame2D.length:void 0},on:{"vue-move-home":e.listen__x__tohome,"vue-frame-rearrange":e.listen__x__onrearrangeframe,"vue-pan-x":e.listen__title__panx,"vue-pan-y":e.listen__title__pany,"vue-zoom":e.listen__title__zoom,"vue-setting-onchanged":e.listen__title_setting__onchanged}}),"wait-input"==e.setting.phase?r("drop-view",{on:{"vue-input-files":e.listen__drop_view__oninput}}):e._e(),"opened"==e.setting.phase?r("div",{ref:"div_opened",staticClass:"opened",on:{touchstart:function(t){return e.listen__div_opened__on_x_down(t,"touch")},mousedown:function(t){return e.listen__div_opened__on_x_down(t,"mouse")},wheel:e.listen__div_opened__onwheel}},e._l(e.frame2D,function(t,n){return r("div",{key:"row-"+n,staticClass:"row-frame"},e._l(t,function(t,a){return r("div",{key:"col-"+n+"-"+a+"-"+e.setting.frameRowCount,staticClass:"col-frame",on:{dblclick:function(n){return e.listen__frame__ondblclick(t)}}},[r("frame-image-diff",{class:"frame-"+n+"-"+a,style:{borderTop:e.getFrameBorder(n,a,!0),borderLeft:e.getFrameBorder(n,a,!1)},attrs:{"frame-data":t,"frame-pan-coord":e.framePanCoord,"frame-zoom":e.frameZoom,"frame-mouse-on":e.frameMouseOn,setting:e.setting},on:{"vue-mounted":function(t){e.frameZoom=t.scale,e.framePanCoord={x:t.x,y:t.y}},"vue-mouseenter":function(t){e.frameMouseOn=!0},"vue-mouseleave":function(t){e.frameMouseOn=!1}}})],1)}),0)}),0):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.layer.active,expression:"layer.active"}],staticClass:"layer"},[r("div",[r("div",{staticClass:"w-spinner"},[r("div",{directives:[{name:"show",rawName:"v-show",value:""==e.layer.errorMessage,expression:"layer.errorMessage == ''"}],staticClass:"spinner"})]),r("span",[e._v(e._s(e.layer.message))])]),r("span",{staticStyle:{color:"rgb(255, 0, 0)"}},[e._v(e._s(e.layer.errorMessage))]),r("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.layer.errorMessage,expression:"layer.errorMessage != ''"}],staticClass:"btn",attrs:{src:n("6314"),title:"home"},on:{click:e.listen__x__tohome}})])],1)},h=[],m=(n("28a5"),n("15ac"),n("34ef"),n("6c7b"),n("c5f6"),n("20d6"),n("ac4d"),n("8a81"),n("ac6a"),n("7f7f"),n("55dd"),n("96cf"),n("3b8d")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body"},[r("input",{ref:"input-file",staticClass:"input-file",attrs:{type:"file",multiple:"",accept:".jpg,.png"},on:{change:e.listen__x__onchange}}),r("div",{ref:"drop",staticClass:"drop",on:{click:e.listen__x__onclick,dragenter:e.listen__x__ondragenter,dragleave:e.listen__x__ondragleave,dragover:e.listen__x__ondragover,drop:e.listen__x__ondrop}},[r("img",{staticClass:"icon",attrs:{src:n("fbe9")}}),e._m(0),r("span",{staticClass:"caution"},[e._v("It only works using the client browser. No data is sent or stored anywhere.")])])])},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v("Drop images"),n("i",[e._v("(*.jpg, *.png)")]),e._v(" or Click to open dialog")])}],v={methods:{listen__x__onclick:function(){this.$refs["input-file"].click()},listen__x__onchange:function(e){this.$emit("vue-input-files",e.target.files)},listen__x__ondragenter:function(e){e.preventDefault(),this.$refs.drop.classList.add("mouse-in")},listen__x__ondragleave:function(e){e.preventDefault(),this.$refs.drop.classList.remove("mouse-in")},listen__x__ondragover:function(e){e.preventDefault()},listen__x__ondrop:function(e){e.preventDefault(),this.$emit("vue-input-files",e.dataTransfer.files)}},mounted:function(){}},_=v,x=(n("1452"),Object(c["a"])(_,p,g,!1,null,"ee9f283a",null)),b=x.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"body",class:{"no-frame-data":void 0==e.frameData},on:{mouseenter:function(){void 0!=e.frameData&&e.$emit("vue-mouseenter",{})},mouseleave:function(){void 0!=e.frameData&&e.$emit("vue-mouseleave",{})}}},[void 0!=e.frameData&&1==e.setting.showOverlayText?n("div",{staticClass:"overlay"},[n("span",{staticClass:"name",class:{reference:1==e.setting.diff.active&&void 0!=e.setting.diff.reference&&e.setting.diff.reference.id==e.frameData.id}},[e._v(e._s(e.frameData.name))]),e._l(e.frameData.params,function(t,r,a){return n("div",{key:"params-"+a,staticClass:"params",style:{"margin-top":"0px",padding:"0px"}},[n("span",{staticClass:"name"},[e._v(e._s(r)+":")]),n("span",{staticClass:"value"},[e._v("Â "+e._s(t))])])})],2):e._e(),n("transition",{attrs:{name:"fade"}},[void 0!=e.frameData&&1==e.setting.diff.active?n("div",{staticClass:"overlay-bottom"},e._l(e.overlayBottomTexts,function(t,r){return n("span",{key:"overlay-bottom-text-"+r,class:t.class},[e._v("\n        "+e._s(t.textContent)+"\n      ")])}),0):e._e()])],1)},A=[],w=n("89e8"),k=n.n(w),I={props:["frame-data","pan-x","frame-pan-coord","frame-zoom","frame-mouse-on","setting"],data:function(){return{layerId:void 0,layerLayerId:void 0}},methods:{listen__x__onresize:function(){var e=this;if(e.$cornerstone.resize(e.$el,!1),void 0!=e.frameData){for(var t=this.$cornerstone.getLayers(this.$el),n=0;n<t.length;n++){var r=t[n].viewport;r.scale=e.frameZoom,r.translation.x=e.framePanCoord.x,r.translation.y=e.framePanCoord.y}this.$cornerstone.updateImage(this.$el)}},listen__layer_image__onchange:function(e){if(void 0!=this.layerLayerId&&(this.$cornerstone.removeLayer(this.$el,this.layerLayerId),this.$cornerstone.updateImage(this.$el),this.layerLayerId=void 0),e>0){var t=this.$cornerstone.addLayer(this.$el,this.frameData.diff.cornerstoneImage,{viewport:this.$cornerstone.getLayer(this.$el,this.layerId).options.viewport,opacity:this.frameData.diff.opacity});this.layerLayerId=t,this.$cornerstone.updateImage(this.$el)}}},computed:{overlayBottomTexts:function(){var e=[],t=this.frameData;return 1==t.resized?e.push({class:"tag-resized",textContent:"resized"}):e.push({class:"size",textContent:"".concat(t.cornerstoneImage.width,"x").concat(t.cornerstoneImage.height)}),void 0!=t.diff.psnr&&(e.push({class:"comma",textContent:","}),0==isNaN(t.diff.psnr)?e.push({class:"",textContent:"PSNR-".concat(t.diff.psnr.toFixed(2),"db")}):e.push({class:"",textContent:"PSNR-Same"})),void 0!=t.diff.pixelCount&&(e.push({class:"comma",textContent:","}),e.push({class:"",textContent:"".concat((t.diff.pixelCount/(t.cornerstoneImage.width*t.cornerstoneImage.height)*100).toFixed(2),"%")})),e}},watch:{framePanCoord:function(e){if(void 0!=this.frameData&&void 0!=e){for(var t=this.$cornerstone.getLayers(this.$el),n=0;n<t.length;n++){var r=t[n].viewport;r.translation.x=e.x,r.translation.y=e.y}this.$cornerstone.updateImage(this.$el)}},frameZoom:function(e){if(void 0!=this.frameData&&void 0!=e){for(var t=this.$cornerstone.getLayers(this.$el),n=0;n<t.length;n++){var r=t[n].viewport;r.scale=e}this.$cornerstone.updateImage(this.$el)}},"frameData.diff.updated":function(e){this.listen__layer_image__onchange(e)},"frameData.id":function(){void 0!=this.layerId&&(this.$cornerstone.setLayerImage(this.$el,this.frameData.cornerstoneImage,this.layerId),this.$cornerstone.updateImage(this.$el))}},mounted:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,s,c,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!==this.frameData&&(k()(this.$el,this._.debounce(this.listen__x__onresize,10)),this.$cornerstone.enable(this.$el),t=this.frameData.cornerstoneImage,n=this.$cornerstone.getDefaultViewport(this.$el,t),void 0==this.framePanCoord?(r=getComputedStyle(this.$el),a=parseInt(r.height,10),i=parseInt(r.width,10),o=a/t.height,s=i/t.width,c=o<s?o:s,n.scale=c,n.translation.y=0,n.translation.x=0,this.$emit("vue-mounted",{scale:c,x:n.translation.x,y:n.translation.y})):(n.scale=this.frameZoom,n.translation.y=this.framePanCoord.y,n.translation.x=this.framePanCoord.x),d=this.$cornerstone.addLayer(this.$el,this.frameData.cornerstoneImage,{viewport:n}),this.layerId=d,this.listen__layer_image__onchange(this.frameData.diff.updated));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){k.a.unbind(this.$el),this.$cornerstone.disable(this.$el)}},C=I,E=(n("00fe"),Object(c["a"])(C,y,A,!1,null,"63c2f74c",null)),R=E.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body"},[r("div",{staticClass:"lamp"},[r("div",{staticClass:"pan-x"},[r("span",[e._v("x:")]),r("input",{attrs:{type:"number",disabled:"opened"!=e.setting.phase},domProps:{value:e.x},on:{change:e.listen__x__onchange}})]),r("div",{staticClass:"pan-y"},[r("span",[e._v("y:")]),r("input",{attrs:{type:"number",disabled:"opened"!=e.setting.phase},domProps:{value:e.y},on:{change:e.listen__y__onchange}})]),r("div",{staticClass:"scale"},[r("span",[e._v("scale:")]),r("input",{attrs:{type:"number",min:"0.01",disabled:"opened"!=e.setting.phase},domProps:{value:e.scale},on:{change:e.listen__scale__onchange}})]),r("div",[r("span",[e._v("diff:")]),r("input",{ref:"check-diff",attrs:{type:"checkbox",disabled:"opened"!=e.setting.phase},domProps:{checked:1==e.setting.diff.active},on:{change:function(t){return e.listen__setting__onchange({diff:{active:t.target.checked}})}}})]),r("div",[r("span",[e._v("ref:")]),r("span",{staticClass:"diff-reference-val",class:{inactive:!e.setting.diff.active},attrs:{title:void 0!=e.setting.diff.reference?e.setting.diff.reference.name+" / can change refrence image to the other image by double click the other frame":""}},[e._v("\r\n        "+e._s(void 0!=e.setting.diff.reference?e.setting.diff.reference.name:"")+"\r\n      ")])]),r("div",{staticClass:"tolerance"},[r("span",[e._v("tolerance:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tolerance,expression:"tolerance"}],ref:"input-tolerance",attrs:{type:"range",min:"1",max:"441.67",disabled:"opened"!=e.setting.phase||0==e.setting.diff.active},domProps:{value:e.tolerance},on:{__r:function(t){e.tolerance=t.target.value}}}),r("span",{staticClass:"tolerance-val"},[e._v(e._s(e.tolerance))])])]),e._m(0),r("img",{staticClass:"btn",attrs:{src:n("6314"),title:"home"},on:{click:e.listen__home__onclick}}),r("img",{staticClass:"btn",attrs:{src:n("05c0"),title:"rearrange frames"},on:{click:e.listen__rearrange__onclick}}),r("img",{staticClass:"btn",attrs:{src:n("f78c"),title:"statistics / not yet supported"}}),r("img",{directives:[{name:"show",rawName:"v-show",value:0==e.setting.fullscreen,expression:"setting.fullscreen == false"}],staticClass:"btn",attrs:{src:n("ebbb"),title:"maxmize"},on:{click:e.listen__fullscreen__onclick}}),r("img",{directives:[{name:"show",rawName:"v-show",value:1==e.setting.fullscreen,expression:"setting.fullscreen == true"}],staticClass:"btn",attrs:{src:n("39f1"),title:"minimize"},on:{click:e.listen__fullscreen__onclick}}),r("img",{staticClass:"btn",attrs:{src:n("b0dce"),title:"setting"},on:{click:e.listen__setting__onclick}})])},T=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticStyle:{"line-height":"0"},attrs:{href:"https://github.com/whwnsdlr1/image-diff"}},[r("img",{staticClass:"btn github",attrs:{src:n("e42c"),title:"github"}})])}],D=(n("8e6e"),n("456d"),n("bd86"));n("a481"),n("6aa2"),n("6b54");function O(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),r+"."+n+"."+t}function P(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n["parent"],a=n["id"],i=n["class"],o=n["text"],s=n["innerHTML"],c=n["attrs"],d=document.createElement(e);for(var l in t)d.style[l]=t[l];if(void 0!==r&&r.appendChild(d),void 0!==a&&(d.id=a),void 0!==i&&(d.className=i),void 0!==o&&(d.textContent=o),void 0!==s&&(d.innerHTML=s),void 0!==c)for(var f in c)d.setAttribute(f,c[f]);return d}function M(e){if(e.length>0){for(var t=0,n=e[0],r=1;r<e.length;r++){var a=e[r];a>n&&(n=a,t=r)}return t}return-1}function B(e,t,n,r,a){var i=document.createElement("canvas"),o=i.getContext("2d"),s=document.createElement("canvas"),c=s.getContext("2d");return i.width=t,i.height=n,o.putImageData(new ImageData(new Uint8ClampedArray(e),t,n),0,0),s.width=r,s.height=a,c.drawImage(i,0,0,i.width,i.height,0,0,s.width,s.height),c.getImageData(0,0,r,a).data}function $(e){for(var t,n,r,a,i,o="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(e.buffer),d=c.byteLength,l=d%3,f=d-l,u=0;u<f;u+=3)i=c[u]<<16|c[u+1]<<8|c[u+2],t=(16515072&i)>>18,n=(258048&i)>>12,r=(4032&i)>>6,a=63&i,o+=s[t]+s[n]+s[r]+s[a];return 1===l?(i=c[f],t=(252&i)>>2,n=(3&i)<<4,o+=s[t]+s[n]+"=="):2===l&&(i=c[f]<<8|c[f+1],t=(64512&i)>>10,n=(1008&i)>>4,r=(15&i)<<2,o+=s[t]+s[n]+s[r]+"="),o}function z(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r.buffer}function F(e){for(var t=new Uint8Array(4*e.length),n=0;n<e.length;n++){var r=4*n,a=e[n];t[r]=a,t[r+1]=a,t[r+2]=a,t[r+3]=255}return t}function U(e){for(var t=new Uint8Array(e.length/3*4),n=0;n<e.length;n+=3){var r=n/3*4;t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2],t[r+3]=255}return t}function j(e){for(var t=e.length/3,n=new Uint8Array(4*t),r=0;r<t;r++){var a=4*r;n[a]=e[r],n[a+1]=e[r+t],n[a+2]=e[r+t+t],n[a+3]=255}return n}function W(e){for(var t=new Uint8Array(e.length/4*3),n=0;n<e.length;n+=4){var r=n/4*3;t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2]}return t}function V(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}var Y={getDateString:O,getUuid4:P,createElement:N,argMax:M,resizeImg:B,convertBufferToBase64:$,convertBase64ToBuffer:z,convertGRAY2RGBA:F,convertRGB2RGBA:U,convertRGB2RGBA1:j,convertRGBA2RGB:W,convertHexToRgb:V};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach(function(t){Object(D["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z={props:["setting","frame-zoom","frame-pan-coord","frame-row-count"],data:function(){return{x:void 0,y:void 0,scale:void 0,tolerance:void 0}},methods:{listen__home__onclick:function(){this.setting.phase="wait-input",1==this.$refs["check-diff"].checked&&(this.$refs["check-diff"].checked=!1),this.$emit("vue-move-home",{})},listen__fullscreen__onclick:function(){1==this.setting.fullscreen?(document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setting.fullscreen=!1):(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen&&document.body.webkitRequestFullScreen(),this.setting.fullscreen=!0)},listen__rearrange__onclick:function(){this.$emit("vue-frame-rearrange")},listen__setting__onclick:function(){var e=this,t={display:"flex",flexDirection:"row",marginBottom:"15px",alignItems:"center",justifyContent:"space-between"},n={borderRadius:"5px",padding:"0px 0px 0px 3px"},r=Y.createElement("DIV",{width:"300px"},{}),a=Y.createElement("DIV",t,{parent:r});Y.createElement("SPAN",{fontSize:"12px"},{parent:a,text:"define image size"});var i,o,s=Y.createElement("DIV",{},{parent:a});"wait-input"==e.setting.phase||void 0!=e.setting.predefinedImageWidth&&void 0!=e.setting.predefinedImageHeight?(i=Y.createElement("INPUT",L({width:"40px"},n),{parent:s,attrs:{type:"number",min:1,value:e.setting.predefinedImageWidth}}),"wait-input"!=e.setting.phase&&(i.disabled=!0),Y.createElement("SPAN",{fontSize:"12px",padding:"0px 5px"},{parent:s,text:"x"}),o=Y.createElement("INPUT",L({width:"40px"},n),{parent:s,attrs:{type:"number",min:1,value:e.setting.predefinedImageHeight}}),"wait-input"!=e.setting.phase&&(o.disabled=!0)):Y.createElement("SPAN",{fontSize:"12px",color:"red"},{parent:s,text:"undefined"});var c=Y.createElement("DIV",t,{parent:r});Y.createElement("SPAN",{fontSize:"12px"},{parent:c,text:"show overlay text"});var d=Y.createElement("INPUT",{},{parent:c,attrs:{type:"checkbox"}});1==e.setting.showOverlayText&&(d.checked=!0);var l,f=Y.createElement("DIV",t,{parent:r});Y.createElement("SPAN",{fontSize:"12px"},{parent:f,text:"frame row count"}),void 0!=e.setting.frameRowCount?l=e.setting.frameRowCount:void 0!=e.frameRowCount&&(l=e.frameRowCount);var u=Y.createElement("INPUT",L({width:"40px"},n),{parent:f,attrs:{type:"number",min:1,value:l}}),h=Y.createElement("DIV",t,{parent:r});Y.createElement("SPAN",{fontSize:"12px"},{parent:h,text:"border width"});var m=Y.createElement("INPUT",L({width:"40px"},n),{parent:h,attrs:{type:"number",min:0,max:10,value:e.setting.borderWidth}}),p=Y.createElement("DIV",t,{parent:r});Y.createElement("SPAN",{fontSize:"12px"},{parent:p,text:"border color"});var g=Y.createElement("DIV",{},{parent:p});Y.createElement("SPAN",{fontSize:"12px",marginRight:"3px"},{parent:g,text:"R:"});var v=Y.createElement("INPUT",L({width:"40px",marginRight:"10px"},n),{parent:g,attrs:{type:"number",min:0,max:255,value:e.setting.borderColor[0]}});Y.createElement("SPAN",{fontSize:"12px",marginRight:"3px"},{parent:g,text:"G:"});var _=Y.createElement("INPUT",L({width:"40px",marginRight:"10px"},n),{parent:g,attrs:{type:"number",min:0,max:255,value:e.setting.borderColor[1]}});Y.createElement("SPAN",{fontSize:"12px",marginRight:"3px"},{parent:g,text:"B:"});var x=Y.createElement("INPUT",L({width:"40px"},n),{parent:g,attrs:{type:"number",min:0,max:255,value:e.setting.borderColor[2]}});e.$mModal.show("dialog",{dom:r,buttons:[{title:"cancel",onclick:function(){}},{title:"confirm",class:["green"],onclick:function(){var t={};if(void 0!=i){var n=i.value,r=o.value;0==isNaN(parseInt(n))&&n!=e.setting.predefinedImageWidth&&0==isNaN(parseInt(r))&&r!=e.setting.predefinedImageHeight&&n>0&&r>0&&(t.predefinedImageWidth=parseInt(n),t.predefinedImageHeight=parseInt(r))}var a=d.checked;a!=e.setting.showOverlayText&&(t.showOverlayText=a);var s=u.value;0==isNaN(parseInt(s))&&s!=e.setting.frameRowCount&&s>0&&(t.frameRowCount=parseInt(s));var c=m.value;0==isNaN(parseInt(c))&&c!=e.setting.borderWidth&&c>=0&&c<40&&(t.borderWidth=parseInt(c));var l=[v.value,_.value,x.value];0==l.map(function(t,n){return t==e.setting.borderWidth[n]}).reduce(function(e,t){return e&&t},!0)&&l.map(function(e){return 0==isNaN(parseInt(e))&&e>=0&&e<=255}).reduce(function(e,t){return e&&t},!0)&&(t.borderColor=l),e.$emit("vue-setting-onchanged",t)}}]})},listen__setting__onchange:function(e){var t=this;t.$emit("vue-setting-onchanged",e)},listen__x__onchange:function(e){var t=parseFloat(e.currentTarget.value);0==isNaN(t)&&t!=this.x&&(this.x=t,this.$emit("vue-pan-x",t))},listen__y__onchange:function(e){var t=parseFloat(e.currentTarget.value);0==isNaN(t)&&t!=this.y&&(this.y=t,this.$emit("vue-pan-y",t))},listen__scale__onchange:function(e){var t=parseFloat(e.currentTarget.value);0==isNaN(t)&&t!=this.scale&&(this.scale=t,this.$emit("vue-zoom",t))},doubleRaf:function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}},watch:{framePanCoord:function(e){void 0!=e?(this.x=parseFloat(e.x.toFixed(2)),this.y=parseFloat(e.y.toFixed(2))):this.x=this.y=void 0},frameZoom:function(e){this.scale=void 0!=e?parseFloat(e.toFixed(2)):void 0},"setting.diff.tolerance":function(e){this.tolerance=e}},mounted:function(){var e=this;e.tolerance=e.setting.diff.tolerance,e.$refs["input-tolerance"].onchange=e._.debounce(function(){e.$emit("vue-setting-onchanged",{diff:{tolerance:e.tolerance}})},100)}},G=Z,J=(n("1ea6"),Object(c["a"])(G,S,T,!1,null,"7f3eb624",null)),Q=J.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"body",on:{mouseup:e.listen__body__onmouseup,mousemove:e.listen__block__onmousemove}},[n("transition-group",{ref:"container",staticClass:"container",attrs:{name:"block",tag:"div"}},e._l(e.paddedArray,function(t,r){return n("div",{key:t.id,staticClass:"block",class:{hover:t.hover},style:{visibility:t.show?"visible":"hidden",margin:e.getBlockMargin(r)},attrs:{title:t.name},on:{mouseenter:function(n){return e.listen__block__onmouseenter(t)},mouseleave:function(n){return e.listen__block__onmouseleave(t)},mousedown:function(n){return e.listen__block__onmousedown(n,t,r)}}},[n("span",{class:{changed:t.index!=t.index0}},[e._v(e._s(t.index+1+". "+t.name))])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.drag,expression:"drag != undefined"}],key:"fake",staticClass:"block fake"},[n("span")]),n("div",{staticClass:"container-grid"},e._l(e.rows*e.cols,function(t){return n("div",{key:"grid-"+t,staticClass:"grid",class:{hover:t-1==e.gridHoverIndex}})}),0)],1)},q=[];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){Object(D["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var te=40,ne=30,re={props:["data-array2D"],data:function(){for(var e=void 0==this.dataArray2D?[[{id:1,name:"abbbb"},{id:2,name:"b"},{id:3,name:"c"}],[{id:4,name:"d"},{id:5,name:"e"},{id:6,name:"f"}],[{id:7,name:"g"},{id:8,name:"h"},{id:9,name:"i"}],[{id:10,name:"j"},{id:11,name:"k"},{id:12,name:"l"}],[{id:13,name:"m"}]]:this.dataArray2D,t=e.length,n=e[0].length,r=0,a=[],i=0,o=0;o<t;o++)for(var s=0;s<n;s++)void 0!=e[o]&&void 0!=e[o][s]?(a.push(ee({},e[o][s],{index:i,index0:i,hover:!1,show:!0})),r++):a.push({id:Y.getUuid4(),show:!1}),i++;return{rows:t,cols:n,array2D:e,paddedArray:a,paddedArray0:void 0,drag:void 0,fakeElement:void 0,fakeBlockText:void 0,containerElement:void 0,blockSize:void 0,blockCount:r,gridsRect:void 0,gridHoverIndex:void 0}},methods:{listen__temp__onclick:function(){for(var e=[],t=0;t<this.paddedArray.length;t++)e.push(this.paddedArray[t]);var n=e[3];e[3]=e[0],e[0]=n,this.paddedArray=e},listen__block__onmouseenter:function(e){void 0==this.drag&&(e.hover=!0)},listen__block__onmouseleave:function(e){void 0==this.drag&&(e.hover=!1)},listen__block__onmousedown:function(e,t,n){var r=e.target;t.hover=!1,t.show=!1;var a=parseInt(getComputedStyle(r.parentElement).paddingLeft);isNaN(a)&&(a=0);var i=parseInt(getComputedStyle(r.parentElement).paddingTop);isNaN(i)&&(i=0);var o=e.pageX-(r.offsetLeft-a+this.containerElement.offsetLeft),s=e.pageY-(r.offsetTop-i+this.containerElement.offsetTop);this.fakeElement.querySelector("span").textContent=r.querySelector("span").textContent,this.drag={element:r,block:t,index:n,x0:o,y0:s},this.fakeElement.style.left="".concat(e.pageX-o,"px"),this.fakeElement.style.top="".concat(e.pageY-s,"px")},listen__block__onmousemove:function(e){if(void 0!=this.drag){this.fakeElement.style.left="".concat(e.pageX-this.drag.x0,"px"),this.fakeElement.style.top="".concat(e.pageY-this.drag.y0,"px");for(var t={x0:this.fakeElement.offsetLeft,x1:this.fakeElement.offsetLeft+this.fakeElement.offsetWidth,y0:this.fakeElement.offsetTop,y1:this.fakeElement.offsetTop+this.fakeElement.offsetHeight},n=this.gridsRect,r=-1,a=-1,i=0;i<n.length;i++){var o=this.getIntersectionArea(t,n[i]);o>a&&(r=i,a=o)}r!=this.drag.index&&a>.5*this.blockSize?this.gridHoverIndex=r:this.gridHoverIndex=void 0}},listen__body__onmouseup:function(){if(void 0!=this.drag){if(this.drag.block.show=!0,this.drag=void 0,void 0!=this.paddedArray0){this.paddedArray0=void 0;for(var e=this.paddedArray,t=0;t<e.length;t++)e[t].index=t}this.gridHoverIndex=void 0}},listen__x__onresize:function(){for(var e=parseInt(getComputedStyle(this.containerElement).width),t=parseInt(getComputedStyle(this.containerElement).height),n=parseInt(e/this.cols-te),r=parseInt(t/this.rows-ne),a=parseInt(e/this.cols),i=parseInt(t/this.rows),o=this.$el.querySelectorAll(".container .block"),s=this.$el.querySelectorAll(".container-grid .grid"),c=0;c<o.length;c++)o[c].style.width="".concat(n,"px"),o[c].style.height="".concat(r,"px"),s[c].style.width="".concat(a,"px"),s[c].style.height="".concat(i,"px"),c%this.cols!=0?(o[c].style.marginLeft="".concat(te,"px"),s[c].style.borderLeft="1px solid rgba(50, 50, 50, 0.5)"):o[c].style.marginLeft="".concat(te/2,"px"),c>=this.cols&&(s[c].style.borderTop="1px solid rgba(50, 50, 50, 0.5)");var d=this.$el.querySelector(".body > .block.fake");d.style.width="".concat(n,"px"),d.style.height="".concat(r,"px");for(var l=0;l<s.length;l++){var f=s[l];this.gridsRect[l]={x0:f.offsetLeft,x1:f.offsetLeft+f.offsetWidth,y0:f.offsetTop,y1:f.offsetTop+f.offsetHeight}}this.blockSize=n*r},getIntersectionArea:function(e,t){var n=Math.min(e.x1,t.x1)-Math.max(e.x0,t.x0),r=Math.min(e.y1,t.y1)-Math.max(e.y0,t.y0);return n<0&&r<0?-1:n*r},getBlockMargin:function(e){var t=e<this.cols?ne/2:ne,n=e>=this.cols*(this.rows-1)?ne/2:0,r=e%this.cols!=0?te:te/2;return"".concat(t,"px 0px ").concat(n,"px ").concat(r,"px")}},watch:{gridHoverIndex:function(e){if(void 0!=e){void 0==this.paddedArray0&&(this.paddedArray0=this.paddedArray);for(var t=this.paddedArray0,n=this.drag.index,r=new Array(t.length),a=0;a<t.length;a++)r[a]=t[a];e<this.blockCount?(r.splice(n,1),r.splice(e,0,t[n])):e<t.length?(r.splice(n,1),r.splice(this.blockCount-1,0,t[n])):(r.splice(n,1),r.push(t[n])),this.paddedArray=r}else if(void 0!=this.paddedArray0){this.paddedArray=this.paddedArray0,this.paddedArray0=void 0;for(var i=this.$el.querySelectorAll(".container .block"),o=0;o<i.length;o++)i[o].style.pointerEvents="none";setTimeout(function(){for(var e=0;e<i.length;e++)i[e].style.pointerEvents=""},1100)}}},mounted:function(){this.containerElement=this.$refs["container"].$el,this.fakeElement=this.$el.querySelector(".block.fake"),this.gridsRect=new Array(this.rows*this.cols),this.listen__x__onresize(),k()(this.$el,this._.debounce(this.listen__x__onresize,10))},updated:function(){},beforeDestroy:function(){k.a.unbind(this.$el)}},ae=re,ie=(n("8a0c"),Object(c["a"])(ae,X,q,!1,null,"7d8b6e65",null)),oe=ie.exports,se=n("df7c"),ce=n.n(se),de=n("eed2"),le=n.n(de),fe=n("fcd8"),ue=n.n(fe);function he(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t(n.target.result);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.readAsArrayBuffer(e)})}function me(e){return new Promise(function(t,n){try{var r=new Uint8Array(e),a=le.a.decode(r,!0);t({pixelData:a.data,width:a.width,height:a.height})}catch(i){n(i)}})}function pe(e){return new Promise(function(t,n){var r=new Uint8Array(e);new ue.a.PNG({filterType:4}).parse(r,function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{null!=r&&n(r),t({pixelData:a.data,width:a.width,height:a.height})}catch(i){n(i)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())})}function ge(e){return ve.apply(this,arguments)}function ve(){return ve=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,".jpg"!=ce.a.extname(t.name)){e.next=10;break}return e.next=4,he(t);case 4:return r=e.sent,e.next=7,me(r);case 7:n=e.sent,e.next=20;break;case 10:if(".png"!=ce.a.extname(t.name)){e.next=19;break}return e.next=13,he(t);case 13:return a=e.sent,e.next=16,pe(a);case 16:n=e.sent,e.next=20;break;case 19:throw new Error("unsupported extension");case 20:return e.abrupt("return",n);case 23:throw e.prev=23,e.t0=e["catch"](0),e.t0;case 26:case"end":return e.stop()}},e,null,[[0,23]])})),ve.apply(this,arguments)}var _e={parseImage:ge,parsePng:pe,parseJpg:me};n("7872");function xe(e,t){for(var n=0,r=0;r<e.length;r+=4){var a=r,i=a+1,o=a+2,s=Math.abs(e[a]-t[a]),c=Math.abs(e[i]-t[i]),d=Math.abs(e[o]-t[o]);n+=s*s+c*c+d*d}if(n<=1e-10)return NaN;var l=n/e.length/4,f=10*Math.log10(65025/l);return f}var be={calcPsnrRgba:xe};function ye(e){return new Promise(function(t){setTimeout(function(){return t()},e)})}var Ae={components:{"drop-view":b,"frame-image-diff":R,"title-bar":Q},data:function(){return{frames:[],framePanCoord:void 0,frameZoom:void 0,frameMouseOn:void 0,moveTouch:void 0,zoomTouch:void 0,diffs:void 0,psnrs:void 0,setting:{phase:"wait-input",fullscreen:!1,showOverlayText:!0,frameRowCount:void 0,borderWidth:1,borderColor:[255,0,0],predefinedImageWidth:void 0,predefinedImageHeight:void 0,diff:{active:!1,reference:void 0,tolerance:1}},layer:{active:!1,message:"",errorMessage:""}}},methods:{listen__drop_view__oninput:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c,d,l,f,u,h,m,p,g,v,_,x,b,y,A,w;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this,1==n.setting.fullscreen&&(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen&&document.body.webkitRequestFullScreen()),n.layer.active=!0,e.next=5,n.nextTick(200);case 5:e.prev=5,r=[],a=!0,i=!1,o=void 0,e.prev=10,s=t[Symbol.iterator]();case 12:if(a=(c=s.next()).done){e.next=23;break}return d=c.value,n.layer.message="parse ".concat(d.name),e.next=17,_e.parseImage(d);case 17:l=e.sent,f=n.parseName(d.name),u=f.name,h=f.params,m=f.index,r.push({image:l,name:u,params:h,index:m});case 20:a=!0,e.next=12;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](10),i=!0,o=e.t0;case 29:e.prev=29,e.prev=30,a||null==s.return||s.return();case 32:if(e.prev=32,!i){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(29);case 37:r.sort(function(e,t){return e.index-t.index}),p=void 0!=n.setting.predefinedImageWidth?n.setting.predefinedImageWidth:r[0].image.width,g=void 0!=n.setting.predefinedImageHeight?n.setting.predefinedImageHeight:r[0].image.height,v=[],e.t1=regeneratorRuntime.keys(r);case 42:if((e.t2=e.t1()).done){e.next=63;break}if(_=e.t2.value,x=r[_],b=x.image,y=void 0,A=void 0,p==b.width&&g==b.height){e.next=56;break}return w=Y.resizeImg(b.pixelData,b.width,b.height,p,g),e.next=52,n.$cornerstone.createCornerstoneImageRgba(void 0,w,p,g);case 52:y=e.sent,A=!0,e.next=60;break;case 56:return e.next=58,n.$cornerstone.createCornerstoneImageRgba(void 0,b.pixelData,p,g);case 58:y=e.sent,A=!1;case 60:v.push({id:Y.getUuid4(),cornerstoneImage:y,diff:{cornerstoneImage:void 0,pixelCount:void 0,psnr:void 0,updated:0,opacity:.7},name:x.name,params:x.params,resized:A}),e.next=42;break;case 63:n.setting.phase="opened",n.frames=v,n.layer.active=!1,e.next=72;break;case 68:e.prev=68,e.t3=e["catch"](5),console.log(e.t3),n.layer.errorMessage=e.t3;case 72:case"end":return e.stop()}},e,this,[[5,68],[10,25,29,37],[30,,32,36]])}));function t(t){return e.apply(this,arguments)}return t}(),listen__frame__onmousemove:function(e){this.framePanCoord=e},listen__div_opened__on_x_down:function(e,t){var n,r,a,i=this;function o(){i.$el.removeEventListener("mousemove",d),i.$el.removeEventListener("mouseup",o)}function s(e){-1!=Array.prototype.findIndex.call(e.changedTouches,function(e){return e.identifier==i.moveTouch.identifier})&&(i.moveTouch=void 0,i.$el.removeEventListener("touchmove",l),i.$el.removeEventListener("touchend",s))}function c(e){-1!=Array.prototype.findIndex.call(e.changedTouches,function(e){return e.identifier==i.zoomTouch.identifier})&&(i.zoomTouch=void 0,i.$el.removeEventListener("touchmove",f),i.$el.removeEventListener("touchend",c))}function d(e){var t=e.pageX-n,a=e.pageY-r;n=e.pageX,r=e.pageY;var o=i.framePanCoord.x+t/i.frameZoom,s=i.framePanCoord.y+a/i.frameZoom;i.framePanCoord={x:o,y:s}}function l(e){var t=Array.prototype.findIndex.call(e.changedTouches,function(e){return e.identifier==i.moveTouch.identifier});if(-1!=t){var a=e.changedTouches[t],o=a.pageX-n,s=a.pageY-r;if(n=a.pageX,r=a.pageY,void 0==i.zoomTouch){var c=i.framePanCoord.x+o/i.frameZoom,d=i.framePanCoord.y+s/i.frameZoom;i.framePanCoord={x:c,y:d}}}}function f(e){var t=Array.prototype.findIndex.call(e.changedTouches,function(e){return e.identifier==i.zoomTouch.identifier});if(void 0!=i.moveTouch&&-1!=t){var n=e.changedTouches[t],r=2.5*(Math.abs(n.pageX-i.moveTouch.pageX)+Math.abs(n.pageY-i.moveTouch.pageY))/(window.innerHeight+window.innerWidth);if(void 0!=a){var o=r-a;a=r;var s=i.frameZoom+o;s>0&&(i.frameZoom=s)}else a=r}}function u(){i.$el.addEventListener("mousemove",d),i.$el.addEventListener("mouseup",o)}function h(){i.$el.addEventListener("touchmove",l),i.$el.addEventListener("touchend",s)}function m(){i.$el.addEventListener("touchmove",f),i.$el.addEventListener("touchend",c)}void 0!=i.framePanCoord&&("touch"==t&&0==e.which?(e.preventDefault(),void 0!=i.moveTouch?(i.zoomTouch=i.copyTouch(e.changedTouches[0]),m()):(i.moveTouch=i.copyTouch(e.changedTouches[0]),n=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY,h())):"mouse"==t&&1==e.which&&(n=e.pageX,r=e.pageY,u()))},listen__div_opened__onwheel:function(e){var t=this;if(void 0!=t.frameZoom){var n=e.wheelDelta<0||e.detail>0?-.1:.1,r=t.frameZoom+n;return r>0&&(t.frameZoom=r),!1}},listen__frame__ondblclick:function(e){var t=this;1==t.setting.diff.active&&t.listen__title_setting__onchanged({diff:{reference:e}})},listen__x__tohome:function(){this.framePanCoord=void 0,this.frameZoom=void 0,this.frames=[],this.moveTouch=void 0,this.zoomTouch=void 0,this.diffs=void 0,this.psnrs=void 0,this.setting.diff.active=!1,this.setting.diff.reference=void 0,this.setting.diff.tolerance=1,this.layer.message="",this.layer.errorMessage="",this.layer.active=!1,void 0!=this.setting.frameRowCount&&(this.$toasted.show("setting - 'frameRowCount' cleared",{type:"error",duration:2e3,position:"bottom-center"}),this.setting.frameRowCount=void 0),void 0!=this.setting.predefinedImageWidth&&void 0!=this.setting.predefinedImageHeight&&(this.$toasted.show("setting - 'define image size' cleared",{type:"error",duration:2e3,position:"bottom-center"}),this.setting.predefinedImageWidth=void 0,this.setting.predefinedImageHeight=void 0)},listen__x__onrearrangeframe:function(){var e=this;if("opened"!=e.setting.phase)e.$toasted.show("open images first.",{type:"error",duration:2500,position:"bottom-center"});else{var t=Y.createElement("DIV",{},{});Y.createElement("H2",{marginTop:"0px",fontSize:"16px"},{parent:t,text:"You Can Drag & Drop below block to rearrange frame's position"}),Y.createElement("hr",{marginTop:"0px",fontSize:"16px"},{parent:t});var n=r["a"].extend(oe),a=this.frame2D.map(function(e){return e.map(function(e){return void 0!=e?{id:e.id,name:e.name}:void 0}).filter(function(e){return void 0!=e})}),i=new n({el:Y.createElement("DIV",{},{}),propsData:{dataArray2D:a}}),o=i.$el;t.appendChild(o),e.$mModal.show("dialog",{dom:t,onafterdomattached:function(){o.style.width="".concat(.7*window.innerWidth,"px"),o.style.height="".concat(.6*window.innerHeight,"px")},buttons:[{title:"cancel",onclick:function(){}},{title:"confirm",class:["green"],onclick:function(){e.listen__title_setting__onchanged({rearrange:i.paddedArray})}}]})}},listen__title__panx:function(e){this.framePanCoord={x:e,y:this.framePanCoord.y}},listen__title__pany:function(e){this.framePanCoord={x:this.framePanCoord.x,y:e}},listen__title__zoom:function(e){this.frameZoom=e},listen__title_setting__onchanged:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,n.layer.message="change setting.",n.layer.active=!0,n.doubleRaf(Object(m["a"])(regeneratorRuntime.mark(function e(){var r,a,i,o,s,c,d,l,f,u,h,m,p,g,v,_,x,b,y,A,w,k,I,C,E,R,S,T,D,O,P,N,M,B,$,z,F,U;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!=t.rearrange&&(r=t.rearrange,a=r.reduce(function(e,t){return e+Number(t.index!=t.index0)},0),a>0)){for(i=[],o=function(e){var t=r[e].id,a=n.frames.findIndex(function(e){return e.id==t});a>=0&&i.push(n.frames[a])},s=0;s<r.length;s++)o(s);n.frames=i}if(void 0==t.diff){e.next=72;break}if(!(n.frames.length<=1)){e.next=6;break}n.$toasted.show("To diff, need more than one image",{type:"error",duration:1500,position:"bottom-center"}),e.next=72;break;case 6:if(void 0==t.diff.active){e.next=48;break}if(t.diff.active!=n.setting.diff.active&&(n.setting.diff.active=t.diff.active),1!=n.setting.diff.active){e.next=47;break}return n.layer.message="check pre-cacluated diff",e.next=12,n.nextTick();case 12:c=n.frames,s=0;case 14:if(!(s<c.length)){e.next=28;break}if(d=c[s],void 0!=d){e.next=18;break}return e.abrupt("continue",25);case 18:if(void 0!=d.diff.cornerstoneImage){e.next=25;break}return n.layer.message="create ".concat(d.name,"'s layer image."),e.next=22,n.nextTick();case 22:return e.next=24,n.$cornerstone.createCornerstoneImageRgba(void 0,new Uint8Array(d.cornerstoneImage.width*d.cornerstoneImage.height*4).fill(255),d.cornerstoneImage.width,d.cornerstoneImage.height);case 24:d.diff.cornerstoneImage=e.sent;case 25:s++,e.next=14;break;case 28:if(void 0!=n.diffs){e.next=45;break}for(l=[],f=[],u=0;u<c.length;u++)l.push(new Array(c.length)),f.push(new Array(c.length));h=0;case 33:if(!(h<c.length-1)){e.next=43;break}return m=c[h],p=m.cornerstoneImage.getPixelData(),n.layer.message="caculate diff between ".concat(m.name," and other images."),e.next=39,n.nextTick();case 39:for(g=h+1;g<c.length;g++){for(v=c[g],_=v.cornerstoneImage.getPixelData(),x=new Int16Array(v.cornerstoneImage.width*v.cornerstoneImage.height),b=0;b<x.length;b++)y=4*b,A=y+1,w=y+2,x[b]=Math.pow(Math.pow(p[y]-_[y],2)+Math.pow(p[A]-_[A],2)+Math.pow(p[w]-_[w],2),.5);l[h][g]=x,f[h][g]=be.calcPsnrRgba(p,_)}case 40:h++,e.next=33;break;case 43:n.diffs=l,n.psnrs=f;case 45:e.next=48;break;case 47:for(k=0;k<n.frames.length;k++)n.frames[k].diff.updated=0;case 48:if(I=!1,void 0!=t.diff.tolerance&&t.diff.tolerance!=n.setting.diff.tolerance&&(n.setting.diff.tolerance=t.diff.tolerance,I=!0),C=!1,void 0!=t.diff.reference&&t.diff.reference!=n.setting.diff.reference&&(n.setting.diff.reference=t.diff.reference,C=!0,n.setting.diff.reference.diff.pixelCount=void 0,n.setting.diff.reference.diff.psnr=void 0),void 0==n.setting.diff.reference&&(n.setting.diff.reference=n.frames[0],C=!0,n.setting.diff.reference.diff.pixelCount=void 0,n.setting.diff.reference.diff.psnr=void 0),1!=n.setting.diff.active){e.next=72;break}if(!I&&!C){e.next=71;break}E=n.setting.diff.tolerance,R=n.frames.map(function(e){return e.id}).indexOf(n.setting.diff.reference.id),S=0;case 58:if(!(S<n.frames.length)){e.next=71;break}if(R!=S){e.next=61;break}return e.abrupt("continue",68);case 61:for(T=n.frames[S],D=n.diffs[Math.min(R,S)][Math.max(R,S)],O=T.diff.cornerstoneImage.getPixelData(),P=0,N=0;N<D.length;N++)M=D[N]>=E,B=4*N,$=B+1,z=$+1,0==M?(O[B]=0,O[$]=0,O[z]=255):(O[B]=255,O[$]=0,O[z]=0,P++);n.frames[S].diff.pixelCount=P,n.frames[S].diff.psnr=n.psnrs[Math.min(R,S)][Math.max(R,S)];case 68:S++,e.next=58;break;case 71:for(F=0;F<n.frames.length;F++)U=n.frames[F],U.id==n.setting.diff.reference.id?n.frames[F].diff.updated=0:n.frames[F].diff.updated+=1;case 72:void 0!=t.predefinedImageWidth&&void 0!=t.predefinedImageHeight&&(n.setting.predefinedImageWidth=t.predefinedImageWidth,n.setting.predefinedImageHeight=t.predefinedImageHeight),void 0!=t.showOverlayText&&(n.setting.showOverlayText=t.showOverlayText),void 0!=t.borderWidth&&(n.setting.borderWidth=t.borderWidth),void 0!=t.borderColor&&(n.setting.borderColor=t.borderColor),void 0!=t.frameRowCount&&(n.setting.frameRowCount=t.frameRowCount),n.layer.active=!1;case 78:case"end":return e.stop()}},e)})));case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),parseName:function(e){var t=ce.a.extname(e);e=e.substr(0,e.length-t.length);var n=e.split("__"),r=n[0];n=n.slice(1),n=n.slice(0,2*Math.floor(n.length/2));for(var a={},i=9999,o=0;o<n.length;o+=2){var s=n[o],c=n[o+1];if("index"==s){var d=parseInt(c);0==isNaN(d)&&(i=c)}else a[s]=c}return{name:r,params:a,index:i}},copyTouch:function(e){return{identifier:e.identifier,pageX:e.pageX,pageY:e.pageY}},arrangeFrames:function(e,t){function n(e,t){if(void 0==e||0==e.length)return[[]];var n=[],r=0,a=Math.ceil(e.length/t),i=!0,o=!1,s=void 0;try{for(var c,d=e[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var l=c.value;r%a==0&&n.push([]);var f=n[n.length-1];f.push(l),r++}}catch(m){o=!0,s=m}finally{try{i||null==d.return||d.return()}finally{if(o)throw s}}for(;r<a*t;r++){var u=void 0;r%a==0&&n.push([]);var h=n[n.length-1];h.push(u)}return n}return void 0==t&&(t=e.length<3?1:e.length<9?2:3),n(e,t)},getFrameBorder:function(e,t,n){var r=this;return n?e>0?"".concat(r.setting.borderWidth,"px solid rgb(").concat(r.setting.borderColor.join(","),")"):"":t>0?"".concat(r.setting.borderWidth,"px solid rgb(").concat(r.setting.borderColor.join(","),")"):""},getUuid4:function(){return Y.getUuid4()},doubleRaf:function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})},nextTick:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:5,e.next=3,this.$nextTick();case 3:return e.next=5,ye(t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},computed:{frame2D:function(){return this.arrangeFrames(this.frames,this.setting.frameRowCount)}},created:function(){},updated:function(){},mounted:function(){console.log(this)}},we=Ae,ke=(n("aab9"),Object(c["a"])(we,u,h,!1,null,"517fb13e",null)),Ie=ke.exports;r["a"].use(f["a"]);var Ce=new f["a"]({routes:[{path:"*",component:Ie}],mode:"history"}),Ee=n("415c"),Re=n.n(Ee),Se=n("a65d"),Te=n.n(Se),De=n("81d9"),Oe=n.n(De);function Pe(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}function Ne(e,t){var n=t.width,r=t.height,a=t.pixelData,i=255,o=n*r*4,s=Oe.a.renderColorImage,c={imageId:e,minPixelValue:0,maxPixelValue:i,slope:1,intercept:0,windowCenter:127,windowWidth:256,render:s,getPixelData:function(){return a},rows:r,columns:n,height:r,width:n,color:!0,columnPixelSpacing:1,rowPixelSpacing:1,invert:!1,sizeInBytes:o};return{promise:new Promise(function(e){e(c)}),cancelFn:void 0}}var Me={install:function(e){function t(e,t,n,r){return new Promise(function(a){e=void 0==e?Pe():e,Oe.a.loadImage("rgbaLoader:".concat(e),{pixelData:t,width:n,height:r}).then(function(e){a(e)})})}Oe.a.registerImageLoader("rgbaLoader",Ne),e.prototype.$cornerstone=Oe.a,e.prototype.$cornerstone.createCornerstoneImageRgba=t}},Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-modal"},[n("div",{staticClass:"content"},[n("div",{staticClass:"row0"}),n("div",{staticClass:"row1"}),n("div",{staticClass:"row2"},e._l(e.dButtons,function(t,r){return n("button",{key:"btn-"+r,class:t.class,on:{click:function(n){return e.listen__x__onclick(t.onclick)}}},[e._v(e._s(t.title))])}),0)])])},$e=[],ze={methods:{listen__x__onclick:function(e){e(),this.$destroy()},set:function(e){this.$el.querySelector(".row1").appendChild(e)},doubleRaf:function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}},mounted:function(){var e=this;this.$el.querySelector(".row1").appendChild(this.dDom),this.doubleRaf(function(){void 0!=e.onafterdomattached&&e.onafterdomattached(e.dDom)})},destroyed:function(){document.body.removeChild(this.$el)}},Fe=ze,Ue=(n("5b51"),Object(c["a"])(Fe,Be,$e,!1,null,"080821d0",null)),je=Ue.exports,We={install:function(e){var t=e.extend(je);e.prototype.$mModal={show:function(e,n){if("dialog"===e){var r=new t({el:document.createElement("DIV"),data:function(){return{dType:"dialog",dDom:n.dom,dButtons:n.buttons,onafterdomattached:n.onafterdomattached}}});document.body.appendChild(r.$el)}}}}};r["a"].config.productionTip=!1,r["a"].use(Re.a),r["a"].use(Me),r["a"].use(We),r["a"].use(Te.a),new r["a"]({render:function(e){return e(l)},router:Ce,components:{App:l}}).$mount("#app")},"5b51":function(e,t,n){"use strict";var r=n("a8cd"),a=n.n(r);a.a},6314:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAm0lEQVR4AdTKoQ5FAACF4VsURdJsoqpKXtFzeAtFVUXNJikmfne74W4MVKedf9/nNVOpnuNADWrBEx5qsFrRCO94rMOsUJjRia94asAo+73MiEF6xnMTesm/JHpM8iNeWtCKNjXSYlHu+Xeh/3+BQ4YTwyAOkDBQNhRZMPM/FGB1KgxkYpFAVoDMR6iiXAOCHpoaEACZT56GYQUAtMQU+S6/fEEAAAAASUVORK5CYII="},"64a9":function(e,t,n){},"8a0c":function(e,t,n){"use strict";var r=n("ba42"),a=n.n(r);a.a},a106:function(e,t,n){},a8cd:function(e,t,n){},aab9:function(e,t,n){"use strict";var r=n("a106"),a=n.n(r);a.a},b0dce:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAA/klEQVR4AYzSgYYCYRSG4SmYiQW0qEIXVBfRBqh7HNC2ewEJZIdBwQZaAM9GB78azXwAzss57/my5igUWffIlUp51/GBEpQG3ca3qFTYvkCkqc3M1JI0Acl4douZUwsQB28cwdHmfvgLwNhBmoNxI6AAPZ84WRgaWjhhpweKR+9UPnAxyiLGfrFSoZQn3sPMF5ZZEkt8h7HSILwLM/4wSQETXMPY/S/eEuCKaQqYEkAdQLLStMtK6dE/T0ePXLCK8fxZa98OZ3PvhubO2OmDvPlxE3tp9m4S2qqxFtWwjmp0Ll/dqa1hrK3e/4MCWLzch4U7hVmU8kIAES+4lAMAFLHcoWF4uAAAAAAASUVORK5CYII="},ba42:function(e,t,n){},dd6a:function(e,t,n){},e42c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII="},ebbb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAQAAAADIDABVAAAAAnRSTlMAAHaTzTgAAAAbSURBVHgBY8AG2A8/AGM2hgQ4RgPIcnD1WAAArS8JDWjIOJkAAAAASUVORK5CYII="},f78c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAATklEQVR4Ae3VtQHAMAwFUW2o7e06sMcFqzDjf63hOslWEcCBwHYB8KlAzn7ZVOAQzw1YS4Hexc0BBay1OqDAt2dRyn7p3MKJbBcBtzWkACRdYAK61wtcAAAAAElFTkSuQmCC"},fbe9:function(e,t,n){e.exports=n.p+"img/baseline_insert_drive_file_black_24dp.5c03877d.svg"}});
//# sourceMappingURL=app.fa80c5f3.js.map